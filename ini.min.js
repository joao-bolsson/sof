function analisaSolicAlt(a,b,c){$.post("../php/geral.php",{admin:1,form:"analisaSolicAlt",id_solic:a,id_pedido:b,acao:c},function(a){0==a?(alert(a),window.location.href="index.php"):(iniSolicitacoes(),iniTableSolicAltPed(2))})}function abreModal(a){$(a).modal()}function avisoSnack(a,b){$(b).snackbar({content:a,show:function(){snackbarText++}})}function iniDataTable(a){$(a).DataTable({destroy:!0,searching:!0,language:{decimal:"",emptyTable:"Nenhum dado na tabela",info:"_MAX_ resultados encontrados",infoEmpty:"",infoFiltered:"",infoPostFix:"",thousands:",",lengthMenu:"Monstrando _MENU_ entradas",loadingRecords:"Carregando...",processing:"Processando...",search:"Pesquisar:",zeroRecords:"Nenhum resultado encontrado",paginate:{first:"Primeiro",last:"\xdaltimo",next:"Pr\xf3ximo",previous:"Anterior"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}},lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],scrollY:"400px",scrollCollapse:!0,paging:!1,scrollX:!0})}function destroyDataTable(a){$(a).DataTable({destroy:!0,searching:!0,language:{decimal:"",emptyTable:"Nenhum dado na tabela",info:"",infoEmpty:"",infoFiltered:"",infoPostFix:"",thousands:",",lengthMenu:"Monstrando _MENU_ entradas",loadingRecords:"Carregando...",processing:"Processando...",search:"Pesquisar:",zeroRecords:"Nenhum resultado encontrado",paginate:{first:"Primeiro",last:"\xdaltimo",next:"Pr\xf3ximo",previous:"Anterior"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}},lengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],scrollY:"400px",scrollCollapse:!0,paging:!1,scrollX:!0}).destroy()}function carregaPostsPag(a){$.post("../php/busca.php",{admin:1,form:"carregaPostsPag",tabela:a},function(a){destroyDataTable("#tableNoticiasEditar"),document.getElementById("contNoticiasEditar").innerHTML=a,iniDataTable("#tableNoticiasEditar")})}function iniAdminSolicitacoes(){iniDataTable("#tableItensPedido"),iniSolicitacoes(),iniTableSolicAltPed(2),iniTableSolicAdiant(2),iniFreeSaldos()}function iniSolicitacoes(){$.post("../php/busca.php",{admin:1,form:"tableItensPedido"},function(a){destroyDataTable("#tableSolicitacoes"),document.getElementById("conteudoSolicitacoes").innerHTML=a,iniDataTable("#tableSolicitacoes")})}function formEnvia(){var a=document.getElementById("id_pedido_alt").value,b=document.getElementById("justificativa_alt_ped").value;$.post("../php/geral.php",{users:1,form:"alt_pedido",id_pedido:a,justificativa:b},function(a){0==a?(alert(a),window.location.href="index.php"):(alert("Sua solicita\xe7\xe3o ser\xe1 an\xe1lisada. Caso seja aprovada, seu pedido estar\xe1 na sess\xe3o 'Rascunhos'"),$("#alt_pedido").modal("hide"))})}function solicAltPed(a){document.getElementById("id_pedido_alt").value=a,abreModal("#alt_pedido"),$("#div-lb-high").addClass("control-highlight")}function iniFreeSaldos(){$.post("../php/busca.php",{admin:1,form:"iniFreeSaldos"},function(a){0==a?(alert(a),window.location.href="index.php"):document.getElementById("contFreeSaldos").innerHTML=a})}function liberaSaldo(a,b,c,d){d=parseFloat(d).toFixed(3),$.post("../php/geral.php",{admin:1,form:"liberaSaldo",id_setor:a,mes:b,ano:c,valor:d},function(a){a?(alert("O saldo do setor acaba de receber R$ "+d+" referente ao per\xedodo "+b+"/"+c),iniFreeSaldos()):(alert("Ocorreu um erro no servidor. Contate o administrador."),window.location.href="sair.php")})}function iniPagSolicitacoes(){iniDataTable("#tableProcessos"),iniDataTable("#tableListProcessos"),iniDataTable("#tableMeusPedidos"),iniDataTable("#tableRascunhos"),iniDataTable("#tableSolicAltPedido"),$.post("../php/busca.php",{users:1,form:"iniPagSolicitacoes"},function(a){destroyDataTable("#tableSolicAdi"),document.getElementById("contSolicAdi").innerHTML=a,iniDataTable("#tableSolicAdi")})}function iniTableSolicAdiant(a){$.post("../php/busca.php",{admin:1,form:"tableSolicitacoesAdiantamento",status:a},function(a){destroyDataTable("#tableSolicitacoesAdiantamento"),document.getElementById("conteudoSolicitacoesAdiantamento").innerHTML=a,iniDataTable("#tableSolicitacoesAdiantamento")}),avisoSnack("Carregamento conclu\xeddo !","body")}function iniTableSolicAltPed(a){var b="tableSolicAltPedido";$.post("../php/busca.php",{admin:1,form:"iniTableSolicAltPed",status:a},function(a){destroyDataTable("#"+b),document.getElementById("contSolicAltPedido").innerHTML=a,iniDataTable("#"+b)})}function analisaAdi(a,b){var c;c=b?confirm("O setor receber\xe1 o valor adiantado e ter\xe1 esse mesmo valor descontado no pr\xf3ximo m\xeas, estando sujeito \xe0 ficar com saldo negativo.\n\nDeseja continuar?"):confirm("A solicita\xe7\xe3o de adiantamento ser\xe1 reprovada e o saldo do setor n\xe3o ser\xe1 alterado.\n\nDeseja continuar?"),c&&$.post("../php/geral.php",{admin:1,form:"aprovaAdi",id:a,acao:b},function(a){iniTableSolicAdiant(2)})}function alterSenha(){var a=document.getElementById("loginUser").value,b=document.getElementById("senhaUser").value;document.getElementById("loader").style.display="inline-block",$.post("../php/geral.php",{admin:1,form:"alterSenha",id_user:a,senha:b},function(a){0!=a?$("#users").html(a):(avisoSnack("Senha alterada com Sucesso !","body"),$("#users").modal("hide"),document.getElementById("alterSenha").reset(),document.getElementById("loader").style.display="none")})}function checkItemPedido(a,b,c){qtd_item=document.getElementById("qtd"+a).value,qtd_item<=0?(document.getElementById("qtd"+a).style.border="0.12em solid red",document.getElementById("qtd"+a).focus()):(document.getElementById("qtd"+a).style.border="none",document.getElementById("qtd"+a).value="",qtd_item>c?avisoSnack("QUANTIDADE INDISPON\xcdVEL !","body"):(valor=parseFloat(qtd_item*b).toFixed(3),total_pedido=document.getElementById("total_hidden").value,total_pedido+=valor,saldo_total=parseFloat(document.getElementById("saldo_total").value),valor>saldo_total?avisoSnack("SALDO INSUFICIENTE !","body"):addItemPedido(a,qtd_item,b)))}function addItemPedido(a,b,c){var d=b*c;t=document.getElementById("total_hidden").value,total=parseFloat(t)+parseFloat(d),document.getElementById("total_hidden").value=parseFloat(total).toFixed(3);var e=parseFloat(total).toFixed(3);document.getElementById("total").value="R$ "+e,s=document.getElementById("saldo_total").value,saldo_total=parseFloat(s)-parseFloat(d),document.getElementById("saldo_total").value=parseFloat(saldo_total).toFixed(3),document.getElementById("text_saldo_total").innerHTML="R$ "+parseFloat(saldo_total).toFixed(3),$.post("../php/busca.php",{users:1,form:"addItemPedido",id_item:a,qtd:b},function(a){conteudoPedido=document.getElementById("conteudoPedido").innerHTML,document.getElementById("conteudoPedido").innerHTML=conteudoPedido+a,avisoSnack("Item Inserido ao Pedido !","body")})}function removeTableRow(a,b){t=document.getElementById("total_hidden").value,total=parseFloat(t)-parseFloat(b),document.getElementById("total_hidden").value=parseFloat(total).toFixed(3),document.getElementById("total").value="R$ "+parseFloat(total).toFixed(3),s=document.getElementById("saldo_total").value,saldo_total=parseFloat(s)+parseFloat(b),document.getElementById("saldo_total").value=parseFloat(saldo_total).toFixed(3),document.getElementById("text_saldo_total").innerHTML="R$ "+parseFloat(saldo_total).toFixed(3);var c=document.getElementById("row"+a);c.parentNode&&c.parentNode.removeChild(c),avisoSnack("Item Removido do Pedido !","body")}function viewCompl(a){document.getElementById("complementoItem").innerHTML=a,$("#viewCompl").modal()}function pesquisarProcesso(a){0==a?a=document.getElementById("searchProcesso").value:(document.getElementById("searchProcesso").value=a,$("#groupNumProc").addClass("control-highlight"),$("#listProcessos").modal("hide")),len=a.length,len<20?avisoSnack("Digite um processo v\xe1lido !","body"):$.post("../php/busca.php",{users:1,form:"pesquisarProcesso",busca:a},function(a){avisoSnack("Busca Realizada com Sucesso !","body"),destroyDataTable("#tableProcessos"),document.getElementById("conteudoProcesso").innerHTML=a,iniDataTable("#tableProcessos")})}function editaPedido(a){$.post("../php/busca.php",{users:1,form:"populaRascunho",id_pedido:a},function(a){var b=jQuery.parseJSON(a);document.getElementById("total_hidden").value=b.valor,document.getElementById("total").value="R$ "+b.valor,document.getElementById("saldo_total").value=parseFloat(b.saldo-b.valor).toFixed(3),document.getElementById("text_saldo_total").innerHTML="R$ "+parseFloat(b.saldo-b.valor).toFixed(3)}),document.getElementById("pedido").value=a,$("#listRascunhos").modal("hide"),$.post("../php/busca.php",{users:1,form:"editaPedido",id_pedido:a},function(a){document.getElementById("conteudoPedido").innerHTML=a})}function login(){var a=document.getElementById("user").value,b=document.getElementById("senha").value;document.getElementById("loader").style.display="inline-block",$.post("../php/login.php",{login:a,senha:b},function(a){"false"==a?(document.getElementById("formLogin").reset(),document.getElementById("aviso").style.display="flex"):window.location.href="../",document.getElementById("loader").style.display="none"})}function aviso(){var a=document.getElementById("aviso");a.parentNode&&a.parentNode.removeChild(a),document.getElementById("card").style.marginTop="-3%"}function btnPesquisa(){""==document.getElementById("pesquisa").style.display||"none"==document.getElementById("pesquisa").style.display?$("#pesquisa").slideDown(200):$("#pesquisa").slideUp(200)}function ver_noticia(a,b,c){$.post("../php/busca.php",{form:"ver_noticia",id:a,tabela:b,slide:c},function(a){window.location.href="ver_noticia.php"})}function addInputsArquivo(){qtd=document.getElementById("qtd-arquivos").value,$.post("../php/busca.php",{form:"addInputsArquivo",qtd:qtd},function(a){tabela_arq=document.getElementById("arquivos").innerHTML,document.getElementById("arquivos").innerHTML=tabela_arq+""+a,document.getElementById("qtd-arquivos").value=parseInt(qtd)+1})}function pesquisar(){busca=document.getElementById("search").value,$.post("../php/busca.php",{form:"pesquisar",busca:busca},function(a){document.getElementById("conteudo").innerHTML=a})}function imprimir(a){0==a&&(a=document.getElementById("pedido").value),$.post("../php/busca.php",{users:1,form:"imprimirPedido",id_pedido:a},function(a){window.open("printRel.php")})}function analisarPedido(a,b){document.getElementById("id_setor").value=b,$.post("../php/busca.php",{admin:1,form:"infoPedido",id_pedido:a,id_setor:b},function(a){var b=jQuery.parseJSON(a);document.getElementById("total_hidden").value=b.valor,document.getElementById("total").value="R$ "+b.valor,document.getElementById("saldo_total").value=parseFloat(b.saldo).toFixed(3),document.getElementById("text_saldo_total").innerHTML="R$ "+parseFloat(b.saldo).toFixed(3),document.getElementById("refMes").value=b.ref_mes,document.getElementById("st"+b.prioridade).checked=!0,document.getElementById("st"+b.status).checked=!0}),document.getElementById("id_pedido").value=a,$.post("../php/busca.php",{admin:1,form:"analisaPedido",id_pedido:a},function(a){avisoSnack("Busca Realizada com Sucesso !","body"),destroyDataTable("#tableItensPedido"),document.getElementById("conteudoPedido").innerHTML=a,iniDataTable("#tableItensPedido")})}function cancelaItem(a){var b=document.getElementById("icon-cancela-item"+a),c=document.getElementById("item_cancelado"+a).value;if("1"==c)b.innerHTML="cancel",$("#icon-cancela-item"+a).removeClass("text-green").addClass("text-red"),document.getElementById("item_cancelado"+a).value=0,document.getElementById("row_item"+a).style.backgroundColor="";else{var d=confirm("O item de id = "+a+" ser\xe1 desativado no Banco de Dados ao final da an\xe1lise do pedido atual, e portanto, os setores n\xe3o poder\xe3o mais solicit\xe1-lo. Deseja prosseguir?");d&&(b.innerHTML="check_circle",$("#icon-cancela-item"+a).removeClass("text-red").addClass("text-green"),document.getElementById("item_cancelado"+a).value=1,document.getElementById("row_item"+a).style.backgroundColor="#ffe6e6")}}function dropTile(a){var b=document.getElementById(a);b.parentNode&&b.parentNode.removeChild(b),qtd=document.getElementById("qtd-arquivos").value,document.getElementById("qtd-arquivos").value=parseInt(qtd)-1}function delArquivo(a){del=confirm("Este arquivo ser\xe1 exclu\xeddo PERMANENTEMENTE do sistema! Estando impossibilitada a sua recupera\xe7\xe3o."),del&&$.post("../php/geral.php",{admin:1,form:"delArquivo",caminhoDel:a},function(a){alert(a),window.location.href="index.php"})}function editaNoticia(a,b,c){document.getElementById("funcao").value="editar",document.getElementById("id_noticia").value=a,document.getElementById("tabela").value=b,document.getElementById("data").value=c,$.post("../php/busca.php",{admin:1,form:"editarNoticia",id:a},function(a){$("#txtnoticia").froalaEditor("destroy"),document.getElementById("txtnoticia").value="",$("#txtnoticia").froalaEditor({language:"pt_br",charCounterCount:!1,heightMin:100,heightMax:400,imageUploadURL:"upload_image.php",fileUploadURL:"upload_file.php",imageManagerLoadURL:"load_images.php",imageManagerDeleteURL:"delete_image.php"}),$("#txtnoticia").froalaEditor("html.insert",a,!0),b="op"+document.getElementById("tabela").value,document.getElementById(b).selected=!0,$("#listNoticias").modal("hide")})}function recarregaForm(){document.getElementById("funcao").value="novanoticia",document.getElementById("id_noticia").value=0,document.getElementById("tabela").value=0}function excluirNoticia(a){var b=confirm("Essa not\xedcia ser\xe1 desativada do sistema. Deseja continuar?");b&&$.post("../php/geral.php",{admin:1,form:"excluirNoticia",id:a},function(a){a?carregaPostsPag(a):window.location.href="../"})}$(".modal").on("hidden.bs.modal",function(a){$(this).removeClass("fv-modal-stack"),$("body").data("fv_open_modals",$("body").data("fv_open_modals")-1)}),$(".modal").on("shown.bs.modal",function(a){"undefined"==typeof $("body").data("fv_open_modals")&&$("body").data("fv_open_modals",0),$(this).hasClass("fv-modal-stack")||($(this).addClass("fv-modal-stack"),$("body").data("fv_open_modals",$("body").data("fv_open_modals")+1),$(this).css("z-index",1040+10*$("body").data("fv_open_modals")),$(".modal-backdrop").not(".fv-modal-stack").css("z-index",1039+10*$("body").data("fv_open_modals")),$(".modal-backdrop").not("fv-modal-stack").addClass("fv-modal-stack"))});